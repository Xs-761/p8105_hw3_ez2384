---
title: "P8105_EZ2384_HW3"
output: github_document
---

```{r load_data, message=FALSE}
# Load the required dataset
  library(p8105.datasets)
      data("ny_noaa")
  library(dplyr)
  library(ggplot2)
  library(tidyverse)
```

### Problem 1

  - Dataset `ny_noaa` is of size `r nrow(ny_noaa)` x  `r ncol(ny_noaa)`, with variables
      - **id**    [char]: Weather station ID
      - **date**  [date]: Date of observation
      - **prcp**  [int] : Precipitation (tenths of mm)
      - **snow**  [int] : Snowfall (mm)
      - **snwd**  [int] : Snow depth (mm)
      - **tmax**  [char]: Maximum temperature (tenths of degrees C)
      - **tmin**  [char]: Minimum temperature (tenths of degrees C)
  - Missing Data
      - `tmin` and `tmax` contains a great deal of missing values
      - `prcp` and `snow` contains some missing values
      - `id` and `date` are complete

  - Data Cleaning Procedures
      - preliminary cleaning (give reasonable column names, rename column names to be more straightforward)
      - created new columns year,month,day 
      - dropped all NA values 
      - changed all column types except for id and date into integer type to facilitate future conversions
      - changed column values for temperature, precipitation, snowfall so that are given in integer units
      
```{r Data_Cleaning, echo=FALSE}

  snow_data = ny_noaa %>% janitor::clean_names() %>% 
              rename("precipitation(mm)"=prcp, "snowfall(mm)"=snow, "snow_depth(mm)"=snwd, 
                     "maximum_temp(°C)"=tmax, "minimum_temp(°C)"=tmin) %>%
              mutate(year=format(date, "%Y"), month=format(date, "%m"), day=format(date, "%d")) %>%
              mutate(across(`precipitation(mm)`:day, as.integer)) %>%
              mutate(`precipitation(mm)`=`precipitation(mm)`/10,    # use the escape character `` for columns containing special chars
                     `maximum_temp(°C)`=`maximum_temp(°C)`/10,
                     `minimum_temp(°C)`=`minimum_temp(°C)`/10
                     ) %>%   
              drop_na()

  snow_data %>% group_by(`snowfall(mm)`) %>% count(name="count") %>% arrange(desc(count))

```

  - For snowfall, the most commonly observed values are 0, which has a total occurrence of 1112758
  
```{r}
  ny_noaa
```
  
  